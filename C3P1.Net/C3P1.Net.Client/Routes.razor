@using Blazr.RenderState
@inject IBlazrRenderStateService RenderState
@inject NavigationManager NavManager

<ThemeProvider Theme="@theme">
    @* Show splashscreen during rendering *@
    @if (RenderState.IsPreRender && !NavManager.Uri.Contains("/Account") && !NavManager.Uri.Contains("/account"))
    {
        <Splash />
        return;
    }
    <Router AppAssembly="typeof(Program).Assembly">
        <Found Context="routeData">
            <AuthorizeRouteView RouteData="routeData" DefaultLayout="typeof(Layouts.MainLayout)">
                <NotAuthorized>
                    <RedirectToLogin />
                </NotAuthorized>
            </AuthorizeRouteView>
            <FocusOnNavigate RouteData="routeData" Selector="h1" />
        </Found>

        <NotFound>
            <C3P1.Net.Client.Pages.Error.NotFound />
        </NotFound>
    </Router>

    <MessageProvider />
    <PageProgressProvider />
</ThemeProvider>

@code {
    private Theme theme = new()
    {
        BarOptions = new()
        {
            /*
             * HorizontalHeight = "72px"
             * is hard set in TopMenu.razor
            */
        },
        ColorOptions = new()
        {
            Primary = "#5C6BC0", // indigo
            Secondary = "#9B59B6", // violet
            Success = "#53B056", // green
            Info = "#2196F3", // blue
            Warning = "#FFD54F", // yellow
            Danger = "#EF5350", // red
            Light = "#FFFFFF", // light text
            Dark = "#2E2E2E", // main text
        },

        BackgroundOptions = new()
        {
            Primary = "#8C4FA3", // violet
            Secondary = "#5A66D0", // indigo
            Success = "#53B056", // green
            Info = "#2196F3", // blue
            Warning = "#FFD54F", // yellow
            Danger = "#EF5350", // red
            Light = "#F0F0F0", // light background
            Dark = "#535353", // dark background
        }
    };
}
